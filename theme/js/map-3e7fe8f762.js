!function e(t,o,n){function i(s,l){if(!o[s]){if(!t[s]){var r="function"==typeof require&&require;if(!l&&r)return r(s,!0);if(a)return a(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var c=o[s]={exports:{}};t[s][0].call(c.exports,function(e){var o=t[s][1][e];return i(o?o:e)},c,c.exports,e,t,o,n)}return o[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,o){var n=e("./shims/jquery"),i=function(e){"undefined"!=typeof e?this.focusable=e:this.focusable=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","*[tabindex]","*[contenteditable]"]};i.prototype.saveFocus=function(e){this.beforeOpenFocus=e},i.prototype.returnFocus=function(){this.beforeOpenFocus&&(this.beforeOpenFocus.focus(),this.beforeOpenFocus=null)},i.prototype.setInitialFocus=function(e){0!==e.length&&setTimeout(function(){e.focus()},1)},i.prototype.getFocusable=function(e){return e.find(this.focusable.join(",")).filter(":visible").filter(function(){var e=n(this).attr("tabindex");return"undefined"==typeof e?!0:n(this).attr("tabindex")>-1})},i.prototype.trapTab=function(e,t){t.preventDefault();var o,n=this.getFocusable(e),i=n.filter(":focus"),a=n.index(i);a>-1?(o=t.shiftKey?a-1:a+1,o>n.length-1?o=0:-1===o&&(o=n.length-1)):o=0,n.get(o).focus()},t.exports=i},{"./shims/jquery":2}],2:[function(e,t,o){(function(e){t.exports=e.jQuery}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,o){var n=function(e){this.env="production","undefined"!=typeof e&&(this.env=e)};n.prototype.setEnvironment=function(e){this.env=e},n.prototype.trackEvent=function(e){e.hitType="event","production"===this.env&&ga("send",e)},n.prototype.trackPageview=function(e){e.hitType="pageview","production"===this.env&&ga("send",e)},n.prototype.sendTo=function(e,t){var o=t.ctrlKey||t.metaKey?!0:!1;o?window.open(e):window.location.href=e},t.exports=n},{}],4:[function(e,t,o){(function(){var e,o;if("undefined"==typeof window)throw new Error("Google-maps package can be used only in browser.");o=function(){throw new Error("Using promises is not supported anymore. Please take a look in new documentation and use callback instead.")},e=function(){function e(){}return e.URL="https://maps.googleapis.com/maps/api/js",e.KEY=null,e.CLIENT=null,e.SENSOR=!1,e.VERSION="3.14",e.WINDOW_CALLBACK_NAME="__google_maps_api_provider_initializator__",e.script=null,e.google=null,e.loading=!1,e.callbacks=[],e.onLoadEvents=[],e.load=function(e){var t;return null==e&&(e=null),null===this.google?this.loading===!0?null!==e&&this.callbacks.push(e):(this.loading=!0,window[this.WINDOW_CALLBACK_NAME]=function(t){return function(){return t._ready(e)}}(this),t=this.URL,t+=this.SENSOR===!0||"true"===this.SENSOR?"?sensor=true":"?sensor=false",null!=this.KEY&&(t+="&key="+this.KEY),null!=this.CLIENT&&(t+="&client="+this.CLIENT+"&v="+this.VERSION),t+="&callback="+this.WINDOW_CALLBACK_NAME,this.script=document.createElement("script"),this.script.type="text/javascript",this.script.src=t,document.body.appendChild(this.script)):null!==e&&e(this.google),{then:function(){return o()},"catch":function(){return o()},fail:function(){return o()}}},e.release=function(e){var t;return t=function(t){return function(){return t.google=null,t.loading=!1,t.callbacks=[],t.onLoadEvents=[],"undefined"!=typeof window.google&&delete window.google,"undefined"!=typeof window[t.WINDOW_CALLBACK_NAME]&&delete window[t.WINDOW_CALLBACK_NAME],null!==t.script&&(t.script.parentElement.removeChild(t.script),t.script=null),e()}}(this),this.loading?this.load(function(){return t()}):t()},e.onLoad=function(e){return this.onLoadEvents.push(e)},e._ready=function(t){var o,n,i,a,s,l,r;for(null==t&&(t=null),e.loading=!1,null===e.google&&(e.google=window.google),l=e.onLoadEvents,n=0,a=l.length;a>n;n++)(o=l[n])(e.google);for(null!==t&&t(e.google),r=e.callbacks,i=0,s=r.length;s>i;i++)(t=r[i])(e.google);return e.callbacks=[]},e}(),"object"==typeof t?t.exports=e:window.GoogleMapsLoader=e}).call(this)},{}],5:[function(e,t,o){var n=e("../../../shims/backbone"),i={Location:e("../../models/Location")};t.exports=n.Collection.extend({model:i.Location,initialize:function(e,t){this.category=t.category}})},{"../../../shims/backbone":37,"../../models/Location":31}],6:[function(e,t,o){var n=e("../../shims/backbone");t.exports=n.Model.extend({urlRoot:"/api",parse:function(e){var t=e.data?e.data:e;return t}})},{"../../shims/backbone":37}],7:[function(e,t,o){var n=(e("../../shims/backbone"),{Base:e("./Base")});t.exports=n.Base.extend({})},{"../../shims/backbone":37,"./Base":6}],8:[function(e,t,o){var n=e("../../shims/backbone"),i={teaser:e("../../templates/teasers/teaser.html")},a=e("analytics"),s=e("../../lib/getMedia");t.exports=n.View.extend({className:"supporting-content-item",template:i.result,context:"Sidebar",modalView:null,modalData:null,modal:null,imageThumbnail:"small_thumb",initialize:function(e){this.options=e||{},this.setContext(),this.analytics=new a,vent.on("modal:close",this.onModalClose,this),this.modalData||(this.modalData=this.model),this.teaserImageData||(this.teaserImageData=this.model),this.setImage(),this.setAccentColor()},setImage:function(){var e=this.teaserImageData.get("meta")||this.teaserImageData.get("_source");this.teaser_image=e.media?s(e.media,this.imageThumbnail,"medium_thumb"):null,this.model.set("teaser_image",this.teaser_image)},setAccentColor:function(){var e=this.teaserImageData.get("color");!e&&this.teaser_image&&(e=this.teaser_image.hex?{accent:this.teaser_image.hex,contrast:this.teaser_image.hex_contrast}:null,this.model.set("teaser_color",e))},setContext:function(){this.options.context&&(this.context=this.options.context)},hover:function(e){$(e.currentTarget).css("cursor","pointer")},openModal:function(e){e.preventDefault(),this.modalView&&(this.modal?this.modal.toTop():(this.modal=new this.modalView({model:this.modalData,focusBeforeOpen:$(":focus")}),this.modal.show(),this.trackModalOpen()))},onModalClose:function(e){this.modal&&e==this.modalData&&(this.modal=null)},trackModalOpen:function(){this.analytics.trackEvent({eventCategory:this.context,eventAction:"Open Modal",eventLabel:this.modalData.get("post_type")+" : "+this.modalData.get("post_title")})},render:function(){var e=(this.model.get("teaser_image"),this.model.get("post_type")||this.model.get("_type")),t=this.model.get("id")||this.model.get("_id");return this.$el.addClass("type-"+e),this.$el.addClass(e),this.$el.addClass("force"),this.$el.attr("data-id",t),this.$el.append(this.template(this.model.toJSON())),this}})},{"../../lib/getMedia":35,"../../shims/backbone":37,"../../templates/teasers/teaser.html":50,analytics:3}],9:[function(e,t,o){var n=(e("../../shims/backbone"),{Modal:e("./ModalView")});t.exports=n.Modal.extend({className:"modal-background full-width"})},{"../../shims/backbone":37,"./ModalView":10}],10:[function(e,t,o){var n=e("../../shims/jquery"),i=e("../../shims/backbone"),a=e("../../lib/getMedia"),s=e("accessible-modal"),l={modalBackground:e("../../templates/modal-background.html"),defaultModalWindow:e("../../templates/modal-window-default.html")};t.exports=i.View.extend({className:"modal-background",template:l.defaultModalWindow,backgroundTemplate:l.modalBackground,imageThumbnail:"featured",events:{"click .close":"close"},initialize:function(e){var t="undefined"!=typeof this.model.get("ID")?this.model.get("ID"):this.model.get("_id");this.model.set("id",t),this.setImage(),this.setAccentColor(),n("body").on("keydown."+t,this.evaluateKeyDown.bind(this)),this.listenTo(vent,"modal:closeall",this.close.bind(this)),this.accessibleModal=new s,this.accessibleModal.saveFocus(e.focusBeforeOpen),this.render()},evaluateKeyDown:function(e){var t=jhumodals.isActive(this.$el);if(t){var o=e.charCode?e.charCode:e.keyCode;9===o&&this.accessibleModal.trapTab(this.$el,e)}},setImage:function(){var e=this.model.get("meta")||this.model.get("_source");e&&(this.image=a(e.media,this.imageThumbnail),this.model.set("image",this.image))},setAccentColor:function(){if(this.model){var e=this.model.get("color");!e&&this.image&&(e=this.image.hex?{accent:this.image.hex,contrast:this.image.hex_contrast}:null,this.model.set("color",e))}},render:function(){var e=this.model?this.model.toJSON():{};return this.backgroundTemplate&&this.$el.append(this.backgroundTemplate(e)),this.$el.append(this.template(e)),this},show:function(){jhumodals.add(this.$el),this.showModal(),n(".page-container, .main-nav, .skip-to-main").attr("aria-hidden","true"),n("body").addClass("modals-open")},showModal:function(){this.$el.appendTo("body").hide().show(0).addClass("modal-open").attr("role","dialog").attr("aria-labelledby","aria-label-"+this.model.get("id")).attr("aria-desribedby","aria-description-"+this.model.get("id")).attr("tabindex","-1").focus(),this.accessibleModal.setInitialFocus(this.$el.find(".close"))},close:function(e){this.stopListening(),this.undelegateEvents(),n("body").off("keydown."+this.model.get("id")),e&&(e.stopPropagation(),e.preventDefault()),jhumodals.remove(this.$el),0===jhumodals.count()&&(this.accessibleModal.returnFocus(),n("body").removeClass("modals-open"),n(".page-container, .main-nav, .skip-to-main").removeAttr("aria-hidden")),this.$el.removeClass("modal-open"),setTimeout(this.remove.bind(this),1e3),vent.trigger("modal:close",this.model)},toTop:function(){this.$el.remove().removeClass("modal-open"),this.showModal(),this.delegateEvents()}})},{"../../lib/getMedia":35,"../../shims/backbone":37,"../../shims/jquery":38,"../../templates/modal-background.html":48,"../../templates/modal-window-default.html":49,"accessible-modal":1}],11:[function(e,t,o){var n=e("../../../shims/backbone");t.exports=n.View.extend({className:"mapcanvas",render:function(){var e=this.model.get("meta");return this.map=new google.maps.Map(this.el,{center:new google.maps.LatLng(e.center_latitude,e.center_longitude),minZoom:e.min_zoom||null,maxZoom:e.max_zoom||null,styles:this.model.get("styles")||[],zoom:e.zoom}),this.model.set("googleMapObject",this.map),this}})},{"../../../shims/backbone":37}],12:[function(e,t,o){var n=e("../../../shims/backbone"),i={Pin:e("./PinView"),InfoWindow:e("./InfoWindowView")};t.exports=n.View.extend({initialize:function(){this.infoWindowView=i.InfoWindow,this.render()},render:function(){return new i.Pin({model:this.model}),new this.infoWindowView({model:this.model}),this}})},{"../../../shims/backbone":37,"./InfoWindowView":18,"./PinView":21}],13:[function(e,t,o){var n=(e("../../../shims/backbone"),{Image:e("../../models/Image")}),i={ContentTeaser:e("../ContentTeaserView"),GoogleMapModal:e("./GoogleMapModalView")},a={modalTrigger:e("../../../templates/maps/modal-trigger.html")};t.exports=i.ContentTeaser.extend({className:"model-trigger-link",template:a.modalTrigger,loadingTemplate:a.loading,modalView:i.GoogleMapModal,events:{click:"openModal"},initialize:function(e){i.ContentTeaser.prototype.initialize.call(this,e),this.loadingIcon=e.loadingIcon;var t=e.attr||{};if(t.linkImage){this.setSize(t.size);var o=new n.Image({id:t.linkImage}),a=this;o.fetch().then(function(){a.model.set("linkImage",o.toJSON()),a.render()})}else this.model.set("linkText",t.linkText||"Click here to open the map"),this.render()},setSize:function(e){e=e||"large","small"===e&&(e="small_thumb"),this.model.set("size",e)},render:function(){return this.loadingIcon.remove(),this.$el.append(this.template(this.model.toJSON())),this}})},{"../../../shims/backbone":37,"../../../templates/maps/modal-trigger.html":47,"../../models/Image":30,"../ContentTeaserView":8,"./GoogleMapModalView":14}],14:[function(e,t,o){var n=(e("../../../shims/backbone"),{ModalFullscreen:e("../ModalFullscreenView"),GoogleMap:e("./GoogleMapView"),CampusMap:e("./campus-map-modal/CampusMapView")}),i={map:e("../../../templates/maps/map-modal.html")};t.exports=n.ModalFullscreen.extend({template:i.map,showModal:function(){n.ModalFullscreen.prototype.showModal.call(this),this.view.recenter()},render:function(){var e=this.model?this.model.toJSON():{};this.backgroundTemplate&&this.$el.append(this.backgroundTemplate(e)),this.$el.append(this.template(e));var t=n.GoogleMap;return this.$el.addClass("map"),8001===this.model.get("ID")&&(t=n.CampusMap,this.$el.addClass("campus-map")),this.view=new t({model:this.model,el:this.$el,modal:!0}),this}})},{"../../../shims/backbone":37,"../../../templates/maps/map-modal.html":45,"../ModalFullscreenView":9,"./GoogleMapView":17,"./campus-map-modal/CampusMapView":25}],15:[function(e,t,o){var n=e("../../../shims/backbone"),i={sidebarClose:e("../../../templates/maps/modal-sidebar-close.html")};t.exports=n.View.extend({tagName:"a",className:"close-box-x",template:i.sidebarClose,render:function(){return this.$el.append(i.sidebarClose()),this}})},{"../../../shims/backbone":37,"../../../templates/maps/modal-sidebar-close.html":46}],16:[function(e,t,o){var n=e("../../../shims/jquery"),i=e("../../../shims/backbone"),a={LocationLinkSet:e("./LocationLinkSetView"),GoogleMapSideBarClose:e("./GoogleMapSidebarCloseView")};t.exports=i.View.extend({className:"nav tabpanel-set force",addToSidebar:function(){var e=new a.LocationLinkSet({collection:this.collection});this.container.append(e.render().el)},render:function(){return this.container=n("<div />").addClass("tabpanel column"),this.$el.append(this.container),this.addToSidebar(),this}})},{"../../../shims/backbone":37,"../../../shims/jquery":38,"./GoogleMapSidebarCloseView":15,"./LocationLinkSetView":19}],17:[function(e,t,o){var n=e("../../../shims/backbone"),i=e("google-maps"),a={Map:e("../../models/Map")},s={GoogleMapCanvas:e("./GoogleMapCanvasView"),GoogleMapLocation:e("./GoogleMapLocationView"),GoogleMapSidebar:e("./GoogleMapSidebarView")},l={loading:e("../../../templates/loading.html")};t.exports=n.View.extend({className:"embedded type-map map force",locationView:s.GoogleMapLocation,sidebarView:s.GoogleMapSidebar,loadingTemplate:l.loading,badLocations:[],initialize:function(e){this.loadingIcon=e.loadingIcon||null,this.modal=e.modal||!1;var t=this.$el.data("id");if(t&&""!==t||this.model)if(this.model)this.render();else{this.model=new a.Map({id:this.$el.data("id"),styles:styles});var o=this;this.model.fetch().then(function(){o.render()})}},validateLocation:function(e){var t=e.get("meta");t.latitude&&t.longitude||this.locations.remove(e)},addLocation:function(e,t){var o=e.get("meta");return o.latitude&&o.longitude?(e.set("googleMapObject",this.model.get("googleMapObject")),e.set("mapId",this.model.get("ID")),void new this.locationView({model:e})):void this.badLocations.push(e)},recenter:function(){if("undefined"!=typeof google){var e=this.model.get("googleMapObject"),t=this.model.get("meta");google.maps.event.trigger(e,"resize"),e.setCenter(new google.maps.LatLng(t.center_latitude,t.center_longitude))}},googleApiReady:function(){var e=new s.GoogleMapCanvas({model:this.model});if(this.$el.append(e.render().el),this.locations=this.model.get("locations"),this.locations.each(this.addLocation,this),this.locations.remove(this.badLocations),this.modal){var t=new this.sidebarView({collection:this.locations});this.$el.append(t.render().el),this.recenter()}this.loadingIcon&&this.loadingIcon.remove()},render:function(){return i.KEY="AIzaSyBHeEYCz1bIBlpKKQzMZ2VrTvjJjyNufdg",i.load(this.googleApiReady.bind(this)),this}})},{"../../../shims/backbone":37,"../../../templates/loading.html":40,"../../models/Map":32,"./GoogleMapCanvasView":11,"./GoogleMapLocationView":12,"./GoogleMapSidebarView":16,"google-maps":4}],18:[function(e,t,o){var n=e("../../../shims/jquery"),i=e("../../../shims/backbone"),a={basic:e("../../../templates/maps/info-windows/basic.html")};t.exports=i.View.extend({initialize:function(){this.render(),vent.on("pin:click",this.analyzeClick,this),vent.on("polygon:click",this.analyzeClick,this),vent.on("link:click",this.analyzeClick,this)},analyzeClick:function(e){e===this.model?this.open():this.close()},open:function(){var e=this.model.get("infoWindow");e.open(this.model.get("googleMapObject"),this.model.get("pin")),this.model.set("windowOpen",!0)},close:function(){this.model.set("windowOpen",!1);var e=this.model.get("infoWindow");e.close()},getTemplate:function(){var e=this.model.get("mapId");return a[e]?a[e]:a.basic},loadBasicInfo:function(){var e=this.getTemplate();this.div.append(e(this.model.toJSON())),this.setContent(),vent.trigger("infowindow:ready",this.model)},setContent:function(){var e=this.model.get("infoWindow");e.setContent(this.container.html())},render:function(){var e=new google.maps.InfoWindow,t=this;return google.maps.event.addListener(e,"closeclick",function(){t.model.set("windowOpen",!1)}),this.model.set("infoWindow",e),this.container=n("<div />"),this.div=n("<div />").addClass("infoWindow").addClass("infoWindow-"+this.model.get("post_name")).appendTo(this.container),this.loadBasicInfo(),this}})},{"../../../shims/backbone":37,"../../../shims/jquery":38,"../../../templates/maps/info-windows/basic.html":43}],19:[function(e,t,o){var n=e("../../../shims/backbone"),i={LocationLink:e("./LocationLinkView")};t.exports=n.View.extend({tagName:"ul",className:"locations tier-2",append:function(e){var t=new i.LocationLink({model:e});this.$el.append(t.render().el)},render:function(){return this.collection.each(this.append,this),this}})},{"../../../shims/backbone":37,"./LocationLinkView":20}],20:[function(e,t,o){var n=e("../../../shims/backbone"),i={locationLink:e("../../../templates/locations/location-link.html")};t.exports=n.View.extend({tagName:"li",className:"location",template:i.locationLink,events:{"click a":"openLocation"},openLocation:function(e){return vent.trigger("link:click",this.model),!1},render:function(){return this.$el.append(this.template(this.model.toJSON())),this}})},{"../../../shims/backbone":37,"../../../templates/locations/location-link.html":42}],21:[function(e,t,o){var n=e("../../../shims/backbone");t.exports=n.View.extend({initialize:function(){vent.on("infowindow:ready",function(e){e===this.model&&this.model.set("active",!0)},this),this.model.on("change:active",this.changeState,this),this.render()},changeState:function(){var e=this.model.get("pin");e.setVisible(this.model.get("active"))},render:function(){var e=this.model.get("meta"),t=new google.maps.Marker({position:new google.maps.LatLng(e.latitude,e.longitude),map:this.model.get("googleMapObject"),title:this.model.get("post_title")||"",visible:this.model.get("active")}),o=this;return google.maps.event.addListener(t,"click",function(){vent.trigger("pin:click",o.model)}),this.model.set("pin",t),this}})},{"../../../shims/backbone":37}],22:[function(e,t,o){var n=(e("../../../../shims/jquery"),e("../../../../shims/backbone"),{InfoWindow:e("../InfoWindowView")}),i={infoWindow:e("../../../../templates/maps/info-windows/campus-map.html")};t.exports=n.InfoWindow.extend({analyzeClick:function(e){e===this.model?this.open():this.close()},getTemplate:function(){return i.infoWindow}})},{"../../../../shims/backbone":37,"../../../../shims/jquery":38,"../../../../templates/maps/info-windows/campus-map.html":44,"../InfoWindowView":18}],23:[function(e,t,o){var n=(e("../../../../shims/backbone"),{CampusMapInfoWindow:e("./CampusMapInfoWindowView"),GoogleMapLocation:e("../GoogleMapLocationView")});t.exports=n.GoogleMapLocation.extend({initialize:function(){this.infoWindowView=n.CampusMapInfoWindow,this.render()}})},{"../../../../shims/backbone":37,"../GoogleMapLocationView":12,"./CampusMapInfoWindowView":22}],24:[function(e,t,o){var n=e("../../../../shims/underscore"),i=(e("../../../../shims/backbone"),{CategorizedLocationSet:e("../../../Collections/googlemap/CategorizedLocationSet")}),a={CategorySet:e("./CategorySetView"),GoogleMapSidebar:e("../GoogleMapSidebarView"),GoogleMapSideBarClose:e("../GoogleMapSidebarCloseView")};t.exports=a.GoogleMapSidebar.extend({categorizeLocations:function(e){var t={},o=[];e.each(function(e){var o=e.get("categories");n.each(o,function(o,n){t[o]||(t[o]=new i.CategorizedLocationSet([],{category:o})),t[o].add(e)})});for(var a in t)o.push(t[a]);return o},addToSidebar:function(){this.categorySets=this.categorizeLocations(this.collection);var e=this;n.each(this.categorySets,function(t){var o=new a.CategorySet({collection:t});e.container.append(o.render().el)})}})},{"../../../../shims/backbone":37,"../../../../shims/underscore":39,"../../../Collections/googlemap/CategorizedLocationSet":5,"../GoogleMapSidebarCloseView":15,"../GoogleMapSidebarView":16,"./CategorySetView":26}],25:[function(e,t,o){var n=(e("../../../../shims/backbone"),{CampusMapLocation:e("./CampusMapLocationView"),CampusMapSidebar:e("./CampusMapSidebarView"),GoogleMap:e("../GoogleMapView")});t.exports=n.GoogleMap.extend({locationView:n.CampusMapLocation,sidebarView:n.CampusMapSidebar})},{"../../../../shims/backbone":37,"../GoogleMapView":17,"./CampusMapLocationView":23,"./CampusMapSidebarView":24}],26:[function(e,t,o){var n=e("../../../../shims/backbone"),i={locationCategory:e("../../../../templates/locations/location-category.html")},a={CategorySet:e("./CategorySetView"),LocationLinkSet:e("../LocationLinkSetView")};t.exports=n.View.extend({tagName:"ul",className:"category tier-1",template:i.locationCategory,events:{"click input":"toggleCategory"},toggleCategory:function(e){this.collection.each(function(e){var t=e.get("active");e.set("active",!t)})},render:function(){this.$el.append(this.template({category:this.collection.category,id:this.cid}));var e=this.$el.find("li"),t=new a.LocationLinkSet({collection:this.collection});return e.append(t.render().el),this}})},{"../../../../shims/backbone":37,"../../../../templates/locations/location-category.html":41,"../LocationLinkSetView":19,"./CategorySetView":26}],27:[function(e,t,o){var n=e("../../shims/backbone");t.exports=n.Collection.extend({url:"/api",initialize:function(e,t){this.options=t||{},this.collectionDeferred=$.Deferred()},createDeferredUrl:function(e){},createDeferreds:function(e){this.deferreds=[];var t=this;_.each(e,function(e){t.deferreds.push($.ajax({type:"GET",url:t.createDeferredUrl(e),dataType:"json"}))})},combineData:function(e){var t=e[0].data,o=this.get(t.id),n=o?o.toJSON():{};return $.extend(t,n)},fetchDeferreds:function(){var e=this;$.when.apply($,this.deferreds).done(function(){var t=[];if(1===e.deferreds.length){var o=e.combineData(arguments);t.push(e.model(o))}else _.each(arguments,function(o){var n=e.combineData(o);t.push(e.model(n))});e.reset(t),e.collectionDeferred.resolve()})}})},{"../../shims/backbone":37}],28:[function(e,t,o){var n=(e("../../shims/backbone"),{Location:e("../models/Location")}),i={Base:e("./Base")};t.exports=i.Base.extend({model:function(e,t){return new n.Location(e,t)},fetch:function(e){return this.createDeferreds(this.models),this.fetchDeferreds(),this.collectionDeferred},createDeferredUrl:function(e){return this.url+"/"+e.get("id")}})},{"../../shims/backbone":37,"../models/Location":31,"./Base":27}],29:[function(e,t,o){arguments[4][6][0].apply(o,arguments)},{"../../shims/backbone":37,dup:6}],30:[function(e,t,o){var n=(e("../../shims/backbone"),{Base:e("./Base")});t.exports=n.Base.extend({})},{"../../shims/backbone":37,"./Base":29}],31:[function(e,t,o){var n=(e("../../shims/backbone"),{Base:e("./Base")});t.exports=n.Base.extend({})},{"../../shims/backbone":37,"./Base":29}],32:[function(e,t,o){arguments[4][7][0].apply(o,arguments)},{"../../shims/backbone":37,"./Base":29,dup:7}],33:[function(e,t,o){var n=function(){};n.prototype.stringToRGB=function(e){var t=/rgb\(/;if(t.test(e))return this.rgbStingToRGB(e);var o=/(#?([A-Fa-f0-9]){3}(([A-Fa-f0-9]){3})?)/;return o.test(e)?this.hexToRGB(e):null},n.prototype.hexToRGB=function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,o,n){return t+t+o+o+n+n});var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return o?{r:parseInt(o[1],16),g:parseInt(o[2],16),b:parseInt(o[3],16)}:null},n.prototype.rgbStingToRGB=function(e){var t=e.replace("rgb(","").replace(")","").replace(" ","").split(",");return{r:t[0],g:t[1],b:t[2]}},n.prototype.hex=function(e){return("0"+parseInt(e).toString(16)).slice(-2)},n.prototype.rgb2hex=function(e){if(/^#[0-9A-F]{6}$/i.test(e))return e.replace("#","");var t=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(,\s*[0-9\.]+)?\)$/);return this.hex(t[1])+this.hex(t[2])+this.hex(t[3])},n.prototype.getContrastingColor=function(e,t,o){if(!t&&!o){var n=this.stringToRGB(e);if(!n)return null;e=n.r,t=n.g,o=n.b}var i=Math.round((299*parseInt(e)+587*parseInt(t)+114*parseInt(o))/1e3);return i>125?"000":"fff"},t.exports=new n},{}],34:[function(e,t,o){t.exports=function(e){return"/"===e.slice(-1)&&(e=e.substr(0,e.length-1)),e.split("/").pop()}},{}],35:[function(e,t,o){function n(e,t){if("string"==typeof e[0].file)return!1;var o=e[0].file;if(!o)return!1;var n=e[0].file.crops;return n[t]?n[t].url:!1}function i(e){return e[0].accent_color?e[0].accent_color.hex:null}function a(e){return e[0].file.alt_text}var s=e("../shims/jquery"),l=e("../lib/color"),r={small_thumb:["small_thumb","large_thumb","featured","gallery"],large_thumb:["large_thumb","small_thumb","featured","gallery"],featured:["featured","large_thumb","small_thumb","gallery"],gallery:["gallery","featured","large_thumb","small_thumb"]};t.exports=function(e,t,o){if(!e)return null;var d=null;return o=o||t,s.each(r[t],function(t,s){if(e[s]){var r=n(e[s],o);if(r){var c=i(e[s]),p=c?l.getContrastingColor(c):null;d={url:r,hex:c,hex_contrast:p,alt_text:a(e[s])}}return!1}}),d}},{"../lib/color":33,"../shims/jquery":38}],36:[function(e,t,o){var n=e("./shims/jquery"),i=e("./lib/extract-id-from-api-url"),a={Location:e("./app/models/Location"),Map:e("./app/Models/Map")},s={LocationSet:e("./app/collections/LocationSet")},l={embedded:e("./app/Views/googlemap/GoogleMapView"),modal:e("./app/Views/googlemap/GoogleMapModalTriggerView")},r={loading:e("./templates/loading.html")};n(function(){n(".primary-content span.shortcode").each(function(e,t){t=n(t);var o=t.data("type");if("map"===o){t.append(r.loading());var d=t.data("attributes"),c=new a.Map({id:d.id});c.fetch().then(function(){var e=c.get("meta"),o=n.map(e.locations,function(e){var t=i(e);return new a.Location({id:t})}),r=new s.LocationSet(o);c.set("locations",r),r.fetch().then(function(){var e=d.modal?l.modal:l.embedded,o=new e({model:c,attr:d,context:"content area",loadingIcon:t.find(".loading")});t.append(o.el)})})}})})},{"./app/Models/Map":7,"./app/Views/googlemap/GoogleMapModalTriggerView":13,"./app/Views/googlemap/GoogleMapView":17,"./app/collections/LocationSet":28,"./app/models/Location":31,"./lib/extract-id-from-api-url":34,"./shims/jquery":38,"./templates/loading.html":40}],37:[function(e,t,o){(function(e){t.exports=e.Backbone}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],38:[function(e,t,o){arguments[4][2][0].apply(o,arguments)},{dup:2}],39:[function(e,t,o){(function(e){t.exports=e._}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],40:[function(require,module,exports){module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{}){if(__p+="",!style)var style="dark";__p+='\n\n<div class="loading '+(null==(__t=style)?"":__t)+'">\n  <i class="fa fa-circle-o-notch fa-spin"aria-hidden="true"></i><span class="visuallyhidden">Loading</span>\n</div>\n'}return __p}},{}],41:[function(require,module,exports){module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<li class="category-header">\n  <input type="checkbox" checked="" id="'+(null==(__t=id)?"":__t)+'" />\n  <label for="'+(null==(__t=id)?"":__t)+'"><a>'+(null==(__t=category)?"":__t)+'<i class="fa fa-fw fa-check-square-o"></i><i class="fa fa-fw fa-square-o"></i></a></label>\n</li>\n';return __p}},{}],42:[function(require,module,exports){module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<a href="#">'+(null==(__t=post_title)?"":__t)+"</a>\n";return __p}},{}],43:[function(require,module,exports){module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div class="name">'+(null==(__t=post_title)?"":__t)+"</div>\n\n","undefined"!=typeof image&&(__p+='\n    <img src="'+(null==(__t=image)?"":__t)+'" alt="'+(null==(__t=post_title)?"":__t)+'" />\n'),__p+="\n\n",meta.description&&(__p+='\n    <div class="description">'+(null==(__t=meta.description)?"":__t)+"</div>\n"),__p+="\n\n",meta.street_address&&(__p+='\n    <div class="street-address">\n        '+(null==(__t=meta.street_address)?"":__t)+"\n\n        ",(meta.city||meta.state||meta.zipcode)&&(__p+="\n            <br />\n        "),__p+="\n\n        ",meta.city&&(__p+="\n            "+(null==(__t=meta.city)?"":__t),meta.state&&(__p+=","),__p+="\n        "),__p+="\n\n        ",meta.state&&(__p+="\n\n            ",__p+="DC"==meta.state?"\n                Washington D.C.\n            ":"\n                "+(null==(__t=meta.state)?"":__t)+"\n            ",__p+="\n\n        "),__p+="\n\n        ",meta.zipcode&&meta.state&&(__p+="\n            "+(null==(__t=meta.zipcode)?"":__t)+"\n        "),__p+="\n    </div>\n\n"),__p+='\n\n<ul class="utilities">\n\n',meta.website&&(__p+='\n    <li><a href="'+(null==(__t=meta.website)?"":__t)+'">Website</a></li>\n'),__p+='\n\n<li><a href="https://www.google.com/maps/dir/Current+Location/'+(null==(__t=meta.latitude)?"":__t)+","+(null==(__t=meta.longitude)?"":__t)+'">Get Directions</a></li>\n\n</ul>\n';return __p}},{}],44:[function(require,module,exports){module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div class="name">'+(null==(__t=post_title)?"":__t)+"</div>\n\n","undefined"!=typeof image&&(__p+='\n    <img src="'+(null==(__t=image)?"":__t)+'" alt="'+(null==(__t=post_title)?"":__t)+'" />\n'),__p+="\n\n",meta.description&&(__p+='\n    <div class="description">'+(null==(__t=meta.description)?"":__t)+"</div>\n"),__p+="\n\n",meta.street_address&&(__p+='\n    <div class="street-address">\n        '+(null==(__t=meta.street_address)?"":__t)+"\n\n        ",(meta.city||meta.state||meta.zipcode)&&(__p+="\n            <br />\n        "),__p+="\n\n        ",meta.city&&(__p+="\n            "+(null==(__t=meta.city)?"":__t),meta.state&&(__p+=","),__p+="\n        "),__p+="\n\n        ",meta.state&&(__p+="\n\n            ",__p+="DC"==meta.state?"\n                Washington D.C.\n            ":"\n                "+(null==(__t=meta.state)?"":__t)+"\n            ",__p+="\n            \n        "),__p+="\n\n        ",meta.zipcode&&meta.state&&(__p+="\n            "+(null==(__t=meta.zipcode)?"":__t)+"\n        "),__p+="\n    </div>\n\n"),__p+='\n\n<ul class="utilities">\n\n',meta.website&&(__p+='\n    <li><a href="'+(null==(__t=meta.website)?"":__t)+'">Website</a></li>\n'),__p+='\n\n<li><a href="https://www.google.com/maps/dir/Current+Location/'+(null==(__t=meta.latitude)?"":__t)+","+(null==(__t=meta.longitude)?"":__t)+'">Get Directions</a></li>\n\n</ul>\n';return __p}},{}],45:[function(require,module,exports){module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<h1 id="aria-label-'+(null==(__t=id)?"":__t)+'" class="visuallyhidden">'+(null==(__t=post_title)?"":__t)+"</h1>\n";return __p}},{}],46:[function(require,module,exports){module.exports=function(obj){var __p="";Array.prototype.join;with(obj||{})__p+='<!-- <button class="close-box-x close-map close" style=""><i class="fa fa-fw fa-times"></i><span class="icon-fallback">Close</span></button> -->\n';return __p}},{}],47:[function(require,module,exports){module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div class="trigger">\n  ',__p+="undefined"!=typeof linkImage?'\n    <a href="#"><img src="'+(null==(__t=linkImage.crops[size].url)?"":__t)+'" alt="'+(null==(__t=linkImage.alt_text||post_title)?"":__t)+'" /></a>\n  ':'\n    <a href="#">'+(null==(__t=linkText)?"":__t)+"</a>\n  ",
__p+="\n</div>\n";return __p}},{}],48:[function(require,module,exports){module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{}){__p+="";var style="undefined"!=typeof color&&color&&"000"===color.contrast?"dark":"light";__p+='\n\n<p id="aria-description-'+(null==(__t=id)?"":__t)+'" class="visuallyhidden">Press the escape key to close the dialog.</p>\n\n<button class="close close-box-x '+(null==(__t=style)?"":__t)+'" aria-label="Close dialog"><i class="fa fa-fw fa-times" aria-hidden="true"></i><span class="icon-fallback">Close</span></button>\n'}return __p}},{}],49:[function(require,module,exports){module.exports=function(obj){var __p="";Array.prototype.join;with(obj||{})__p+="<!-- some kind of modal window default maybe? -->\n";return __p}},{}],50:[function(require,module,exports){module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+="",meta.image&&(__p+='\n  <div class="image">\n    <a href="'+(null==(__t=meta.link)?"":__t)+'" title="'+(null==(__t=post_title)?"":__t)+'"><img src="'+(null==(__t=meta.image.crops.small_thumb.url)?"":__t)+'" alt="'+(null==(__t=meta.image.alt_text)?"":__t)+'" /></a>\n  </div>\n'),__p+='\n\n<h3 class="headline"><a href="'+(null==(__t=meta.link)?"":__t)+'" title="'+(null==(__t=post_title)?"":__t)+'">'+(null==(__t=meta.headline)?"":__t)+'</a></h3>\n\n<div class="summary">'+(null==(__t=meta.summary)?"":__t)+"</div>\n";return __p}},{}]},{},[36]);